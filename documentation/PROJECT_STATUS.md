# üìÑ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ –ø—Ä–æ–µ–∫—Ç–∞ JumushTap (Backend MVP)

–î–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞: 9 —Ñ–µ–≤—Ä–∞–ª—è 2026 –≥.
–°—Ç–∞—Ç—É—Å: Backend MVP Ready (Core logic verified)

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Clean Architecture —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–π –º–æ–¥–µ–ª–µ–π, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π (Views) –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ (Business Logic Layer).

- **Framework:** Django 5.x + Django REST Framework 3.15+
- **Database:** PostgreSQL (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UUID –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö ID)
- **Security:**
  - `djangorestframework-simplejwt` + Token Rotation.
  - `django-cors-headers` –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Flutter Web/Mobile.
  - `django-axes` (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è) / DRF Throttling (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ).
- **Documentation:** `drf-spectacular` (Swagger UI / Redoc).
- **Geodata:** –†–∞—Å—á–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–æ—Ä–º—É–ª—ã Haversine (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `core.utils.geo`).

---

## 2. –î–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –º–æ–¥—É–ª–µ–π (Apps)

### 2.1 Users (–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ü—Ä–æ—Ñ–∏–ª–∏)
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
  - `CustomUser`: –≤—Ö–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `django-phonenumber-field`).
  - –†–æ–ª–∏: `Worker`, `Business`, `Admin`.
  - `OTP`: –ú–µ—Ö–∞–Ω–∏–∑–º –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –ø–∞—Ä–æ–ª–µ–π (—Å–µ–π—á–∞—Å –∫–æ–¥—ã `123456` –¥–ª—è —Ç–µ—Å—Ç–æ–≤).
  - –°–≤–æ–π—Å—Ç–≤–∞ `is_worker`, `is_business` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤.
  - `WorkerProfile`: —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–º–µ–Ω, –Ω–∞–≤—ã–∫–æ–≤.
  - `BusinessProfile`: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ò–ù–ù/–ë–ò–ù (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å), –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —é—Ä–ª–∏—Ü—É.
- **API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
  - `POST /api/v1/auth/register/`
  - `POST /api/v1/auth/login/`
  - `GET /api/v1/auth/me/`

### 2.2 Jobs (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏)
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
  - `Job`: –ú–æ–¥–µ–ª—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (lat/lng) –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.
  - `JobService`:
    - `publish_job`: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã (—Ç–æ–ª—å–∫–æ –±—É–¥—É—â–µ–µ), —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞.
    - `JobMatchingService`: –ü–æ–∏—Å–∫ —Å–º–µ–Ω –≤ —Ä–∞–¥–∏—É—Å–µ N –∫–º –æ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ä–∞–±–æ—Ç–Ω–∏–∫–∞.
  - `ApplicationService`:
    - `apply_to_job`: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—Ç–∫–ª–∏–∫–æ–≤.
    - `accept_application`: –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–∫–ª–∏–∫–∞, –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ Escrow.
  - `CheckInService`:
    - –í–∞–ª–∏–¥–∞—Ü–∏—è GPS (—Ä–∞–¥–∏—É—Å 100–º –æ—Ç —Ç–æ—á–∫–∏ —Ä–∞–±–æ—Ç—ã).
    - –†–∞—Å—á–µ—Ç –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (Decimal —Ç–æ—á–Ω–æ—Å—Ç—å).
- **API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
  - `GET /api/v1/jobs/nearby/` (–ø–æ–∏—Å–∫ –ø–æ GPS)
  - `POST /api/v1/jobs/` (—Å–æ–∑–¥–∞–Ω–∏–µ)
  - `POST /api/v1/jobs/{id}/apply/`

### 2.3 Payments (–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–æ–¥—É–ª—å)
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
  - –ú–æ–¥–µ–ª—å `Escrow`: –•–æ–ª–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É–º–º—ã (`held_amount`) –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞.
  - –ú–æ–¥–µ–ª—å `Transaction`: –ü–æ–ª–Ω—ã–π –ª–æ–≥ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ `pending`, `held`, `completed`, `refunded`.
  - `PaymentService`:
    - –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10%).
    - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `Idempotency Keys` –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
    - `release_escrow_after_checkout`: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PSP –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è (Capture) –∏ –≤—ã–ø–ª–∞—Ç—ã (Payout).
- **–ê–¥–∞–ø—Ç–µ—Ä—ã:** `MockPSPAdapter` –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ Stripe/–ª–æ–∫–∞–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤.

### 2.4 Notifications (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
  - `Device`: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (iOS/Android/Web).
  - `NotificationService`: –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Firebase Cloud Messaging.
  - –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ë–î —Å —Ñ–ª–∞–≥–æ–º `is_read`.
- **–¢—Ä–∏–≥–≥–µ—Ä—ã:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏: –æ—Ç–∫–ª–∏–∫–µ, –ø—Ä–∏–Ω—è—Ç–∏–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É, —á–µ–∫–∏–Ω–µ, –≤—ã–ø–ª–∞—Ç–µ.

### 2.5 Security & Moderation (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
  - `AuditLog`: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (User, Method, Path, StatusCode, Latency).
  - `CorrelationIDMiddleware`: –ü—Ä–∏–≤—è–∑–∫–∞ –ª–æ–≥–æ–≤ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É HTTP-–∑–∞–ø—Ä–æ—Å—É.
  - `FraudService`:
    - `Job Velocity`: –§–ª–∞–≥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ >3 —Å–º–µ–Ω –∑–∞ 10 –º–∏–Ω—É—Ç.
    - `Application Velocity`: –§–ª–∞–≥ –ø—Ä–∏ >10 –æ—Ç–∫–ª–∏–∫–∞—Ö –∑–∞ 5 –º–∏–Ω—É—Ç.
- **–ê–¥–º–∏–Ω–∫–∞:**Proxy-–º–æ–¥–µ–ª—å `Statistics` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±–æ—Ä–æ—Ç–∞, –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–º–µ–Ω –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

---

## 3. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ö—Ä–∏—Ç–µ—Ä–∏—è–º –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP

| –ö—Ä–∏—Ç–µ—Ä–∏–π –¢–ó | –°—Ç–∞—Ç—É—Å Backend | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| :--- | :---: | :--- |
| –†–∞–±–æ—á–∏–π —Ü–∏–∫–ª —Å–º–µ–Ω—ã (End-to-End) | ‚úÖ 100% | –°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è `scripts/verify_mvp_full_flow.py` |
| –†–µ–∞–ª—å–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã | üü° 80% | –õ–æ–≥–∏–∫–∞ –≤–µ—Ä–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∞ Mock-–∞–¥–∞–ø—Ç–µ—Ä–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API Stripe/Bank |
| Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | üü¢ 90% | –õ–æ–≥–∏–∫–∞ –≥–æ—Ç–æ–≤–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è `google-services.json` –¥–ª—è –∂–∏–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å | ‚úÖ 100% | –ö–∞—Å—Ç–æ–º–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞ —Å –ª–æ–≥–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –≥–æ—Ç–æ–≤–∞ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (100+ —é–∑–µ—Ä–æ–≤) | üü¢ –ì–æ—Ç–æ–≤–æ | Throttling –∏ Redis-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã |

---

## 4. –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ Production (Technical TODO)

1. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
   - [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: –°–æ–∑–¥–∞–Ω–∏–µ `Dockerfile` –∏ `docker-compose.yml`.
   - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `Nginx` + `Gunicorn` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç–∏–∫–∏ –∏ –º–µ–¥–∏–∞.
2. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
   - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `Dispute` workflow: –º–µ—Ö–∞–Ω–∏–∑–º —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∞–¥–º–∏–Ω–∞ –≤ –≤—ã–ø–ª–∞—Ç—É –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ.
   - [ ] –î–æ–±–∞–≤–∏—Ç—å `auto-payout` –∑–∞–¥–∞—á—É –≤ Celery: –µ—Å–ª–∏ –±–∏–∑–Ω–µ—Å –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Å–º–µ–Ω—É –≤ —Ç–µ—á–µ–Ω–∏–µ 24—á –ø–æ—Å–ª–µ —á–µ–∫–∞—É—Ç–∞, –≤—ã–ø–ª–∞—Ç–∞ —É—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - [ ] –í–∫–ª—é—á–∏—Ç—å `SECURE_SSL_REDIRECT` –∏ `HSTS` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö production.
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –±—ç–∫–∞–ø –ë–î PostgreSQL.
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
   - [ ] –ó–∞–º–µ–Ω–∏—Ç—å `MockFCMAdapter` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π SDK.
   - [ ] –ó–∞–º–µ–Ω–∏—Ç—å –º–æ–∫ SMS –Ω–∞ `Twilio` –∏–ª–∏ `Infobip`.
